<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Untitled Document</title>
</head>
<body>
    <audio src = "lyd/theme.mp3" id ="theme" loop autoplay></audio>
    <div class = "spillVindu">
        <h1 id = "play">Velkommen til et jævla shitshow</h1>
        <canvas id = "stjerner">

        </canvas>
        <img src = "comie1.png" id="skip">
    </div>

    <script>
        //Main menu & theme
        var mAktiv = false;
        var spaceAktiv = false;
        var theme = document.getElementById("theme");   // Definerer id = theme for js
            theme.volume = 0.09;

        function toggleTheme() {
            return theme.paused ? theme.play() : theme.pause();
        };

        document.onkeydown = function(e) {   //Space og M detection, er faen meg bugga og skada til tusen, fiks
            switch (e.keyCode) {
            case 77:  toggleTheme(); console.log("Music toggled."); break;
            case 32:  document.getElementById("theme").src = "lyd/theme2.mp3"; console.log("Theme switched."); break;
            //bevegelse
            case 37: case 65: venstreAktiv = true;  break;
            case 38: case 87: oppAktiv = true;      break;
            case 39: case 68: høyreAktiv = true;    break;
            case 40: case 83: nedAktiv = true;      break;
            }
        };


    //Movement
    var firkant = document.getElementById("skip");
    var x = 100;
    var y = 100;
    var deltaX = 0;
    var deltaY = 0;
    var høyreAktiv = false;
    var venstreAktiv = false;
    var oppAktiv = false;
    var nedAktiv = false;
    var firkantTekst = "";

    document.onkeyup = function(event) {
      switch (event.keyCode) {
        case 37: case 65: venstreAktiv = false;  break;
        case 38: case 87: oppAktiv     = false;  break;
        case 39: case 68: høyreAktiv   = false;  break;
        case 40: case 83: nedAktiv     = false;  break;
      }
    };




    //Canvas

    var canvas = document.getElementById("stjerner");
    var ctx = canvas.getContext("2d");
        ctx.fillRect(40,20,50,30);

        
    function gameLoop() {
          if (venstreAktiv) deltaX = -5;
          if (høyreAktiv) deltaX = 5;
          if (!venstreAktiv && !høyreAktiv) deltaX = 0;

          if (oppAktiv) deltaY = -5;
          if (nedAktiv) deltaY = 5;
          if (!oppAktiv && !nedAktiv) deltaY = 0;


          x += deltaX;
          y += deltaY;

          skip.style.left = x + "px";
          skip.style.top = y + "px";

          requestAnimationFrame(gameLoop);
        }

        gameLoop();

        
        
        
        
        
    </script>








    <! -- CSS -- >

    <style>
        body {
            margin: 0px;
            margin-top: 10vh;
            padding: 0px;
            background: black;
        }
        .spillVindu {
            height: 80vh;
            width: 100vw;
            background: lightblue;
        }
        #play {
            position: relative;
            top: 30%;
            transform: translateY(-70%);
            text-align: center;
        }
        canvas {
            margin-top: -5vh;
            width: 100%;
            height: 100%;

        }
        #skip {
            position: absolute;
            top: 75vh;
            left: 50vw;
            width: 10vw;
            height: auto;
        }
    </style>
</body>
</html>